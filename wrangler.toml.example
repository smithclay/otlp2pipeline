# Example wrangler.toml - generated by: otlp2pipeline create <env-name> --output wrangler.toml
# Copy this file or use the CLI to generate wrangler.toml

name = "otlp2pipeline-<env-name>"
main = "build/worker/shim.mjs"
compatibility_date = "2024-01-01"

[build]
command = "cargo install -q worker-build && worker-build --release"

[vars]
PIPELINE_LOGS = "https://<stream-id>.ingest.cloudflare.com"
PIPELINE_TRACES = "https://<stream-id>.ingest.cloudflare.com"
PIPELINE_GAUGE = "https://<stream-id>.ingest.cloudflare.com"
PIPELINE_SUM = "https://<stream-id>.ingest.cloudflare.com"
AGGREGATOR_ENABLED = "true"
AGGREGATOR_RETENTION_MINUTES = "60"

[observability]
enabled = true

[observability.logs]
invocation_logs = true
head_sampling_rate = 0.1

[observability.traces]
enabled = false

[[durable_objects.bindings]]
name = "AGGREGATOR"
class_name = "AggregatorDO"

[[durable_objects.bindings]]
name = "REGISTRY"
class_name = "RegistryDO"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["AggregatorDO"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["RegistryDO"]
